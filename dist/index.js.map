{"version":3,"sources":["webpack:///webpack/bootstrap c656dbb3a098df14ed90?5a9e","webpack:///./src/sallied-forth.ts?e3ff","webpack:///./src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c656dbb3a098df14ed90","\nclass StackUnderflowError extends Error {\n    constructor(context: Context, message?: string) {\n        super(`Stack underflow! ${message || '[]'}`);\n        console.log(\"CommandStack dump: \", context.commandStack);\n        if(message) {\n            console.log(message);\n        }\n    }\n\n    toString() {\n        return \"SU\";\n    }\n}\n\nconst DEFAULT_NUMBER_BASE = 10;\n\nlet isNumber = function (context:Context, val): boolean {\n    let base = context.base || DEFAULT_NUMBER_BASE;\n    if (typeof val === \"number\") {\n        return true;\n    }\n    let n;\n    n = parseInt(val, base);\n    // console.log(`int n == ${n} val == ${val} base == ${base} `)\n    if(!isNaN(n) && (n.toString(base) == val)) {\n        return true;\n    }\n    n = parseFloat(val);\n    // console.log(`float n == ${n} val == ${val}`)\n    if (isNaN(n)) {\n        return false;\n    }\n    return (val === '' + n);\n}\n\ntype Error = {\n    message: string\n}\n\ntype Result = {\n    value: any,\n    error?: Error,\n    stack: any[],\n    stdout: string\n}\n\nexport type Context = {\n    stack: any[],\n    stdout: \"\",\n    commandStack: string[],\n    base?:number\n}\n\nexport function createEmptyContext():Context {\n    return { stack: [], stdout: '', commandStack: [] };\n}\n\ntype Command = {\n    name?: string,\n    text: string,\n    command: Function,\n    immediate?: boolean\n}\n\nfunction log(context:Context, value:any):void {\n    context.stdout += '' + value;\n}\n\nfunction emit(context:Context):void {\n    if(!context.stack.length) {\n        throw new StackUnderflowError(context, \"emit\");\n    }\n    context.stdout += String.fromCharCode( context.stack.pop() );\n}\n\nfunction base(context:Context, radix:number):void {\n    context.base = radix;\n}\n\nlet dictionary: Object = {};\n\nfunction add(text: string, name: string, cmd: Function) {\n    dictionary[text] = {\n        name: name,\n        text: text,\n        command: cmd\n    }\n}\n\nadd(\"type\", \"type ( str -- )\", (context: Context) => {\n    // forth( // ( add len -- )\n    //     `0 ?do\n    //         dup c@\n    //         emit 1+\n    //     loop\n    //     drop`\n    //     )\n    if (!context.stack.length) {\n        throw new StackUnderflowError(context, \"type\");\n    }\n    log(context, context.stack.pop());\n});\n\nadd(\"BL\", \"BL ( -- 32 )\", (context, Context) => {\n    context.stack.push(32);\n})\n\nadd(\"emit\", \"emit ( -- )\", (context, Context) => {\n    emit(context);\n})\n\nadd(\"space\", \"space ( -- )\", (context: Context) => {\n    forth(\"BL emit\", context);\n})\n\nadd(\".\", \". ( n -- )\", (context, Context) => {\n    if(!context.stack.length) {\n        throw new StackUnderflowError(context, \"Empty stack for .\");\n    }\n    let val = context.stack.pop();\n    log(context, val.toString(context.base || DEFAULT_NUMBER_BASE) + ' ');\n});\n\nadd(\".s\", \".s ( -- )\", (context:Context) => {\n    log(context, (context.stack.join(' ') || 'Empty') + ' ');\n});\n\nadd(\"base\", \"base ( n -- )\", (context:Context) => {\n    base(context, context.stack.pop());\n});\n\nadd(\"hex\", \"hex ( -- )\", (context: Context) => {\n    base(context, 16);\n});\n\nadd(\"decimal\", \"decimal ( -- )\", (context: Context) => {\n    base(context, 10);\n});\n\n// add('.\"', )\n\n// dictionary[\".\"] = {\n//     name: \"Dot\",\n//     text: \".\",\n//     command: (context: Context) => {\n//         if (!context.stack.length) {\n//             throw new StackUnderflowError();\n//         }\n//         return context.stack.pop();\n//     }\n// };\n\nadd(\"pick\", \"pick ( a0 .. an n -- a0 .. an a0 )\", (context: Context) => {\n    if (!context.stack.length) {\n        throw new StackUnderflowError(context);\n    }\n    let idx = context.stack.pop();\n    let pos = (context.stack.length - 1) - idx;\n    if (pos < 0) {\n        throw new StackUnderflowError(context);\n    }\n    context.stack.push(context.stack[pos]);\n})\n\nadd(\"roll\", \"roll ( a0 .. an n -- a1 .. an a0 )\", (context: Context) => {\n    if (!context.stack.length) {\n        throw new StackUnderflowError(context);\n    }\n    let idx = context.stack.pop();\n    let pos = (context.stack.length - 1) - idx;\n    if (pos < 0) {\n        throw new StackUnderflowError(context);\n    }\n    context.stack.push(context.stack.splice(pos, 1)[0]);\n})\n\nadd(\"dup\", \"dup ( a -- a a )\", (context: Context) => {\n    forth(\"0 pick\", context);\n})\n\nadd(\"over\", \"over ( a b -- a b a )\", (context: Context) => {\n    forth(\"1 pick\", context);\n})\n\nadd(\"rot\", \"rot ( a b c -- b c a )\", (context) => {\n    forth(\"2 roll\", context);\n})\n\nadd(\"-rot\", \"-rot ( a b c -- c a b )\", (context) => {\n    forth(\"rot rot\", context);\n})\n\nadd(\"drop\", \"Drop\", (context: Context) => {\n    if (!context.stack.length) {\n        throw new StackUnderflowError(context, \"Error during drop\");\n    }\n    context.stack.pop();\n})\n\nadd(\"2drop\", \"Two Drop\", (context:Context) => {\n    forth(\"drop drop\", context);\n})\n\nadd(\"+\", \"+ ( n1 n2 -- n1+n2 )\", (context: Context) => {\n    context.stack.push(context.stack.pop() + context.stack.pop());\n})\n\nadd(\"-\", \"- ( n1 n2 -- n1-n2 )\", (context: Context) => {\n    let n2 = context.stack.pop();\n    let n1 = context.stack.pop();\n    context.stack.push(n1 - n2);\n})\n\nadd(\"*\", \"Times\", (context: Context) => {\n    context.stack.push(context.stack.pop() * context.stack.pop());\n})\n\nadd(\"swap\", \"Swap\", (context: Context) => {\n    forth(\"1 roll\", context);\n})\n\nadd(\"nip\", \"nip (a b -- b)\", (context: Context) => {\n    forth(\"swap drop\", context);\n})\n\nadd(\"tuck\", \"tuck (a b -- b a b)\", (context: Context) => {\n    forth(\"swap over\", context);\n})\n\nlet process = function (context, value, index, all): Context {\n    if (isNumber(context, value)) { // push numbers on the stack\n        context.commandStack.push(`-- ${value}`);\n        context.stack.push(parseInt(value, context.base || DEFAULT_NUMBER_BASE));\n    } else {\n        let entry = dictionary[value];\n        if (entry) {\n            context.commandStack.push(entry.name);\n            context.value = entry.command(context);\n        } else {\n            throw Error(`Command not found! |${value}|`);\n        }\n    }\n    return context;\n}\n\n//= { stack: [], stdout: \"\", commandStack: [] }\nexport const forth = (input: string, context: Context): Result => {\n    let operands = input.split(/\\s+|\"(?:\\\\\"|[^\"])+\"/g).filter((txt)=> txt.length);\n    // console.log(\"operands\", operands);\n    let result = operands.reduce(process, context);\n    // console.log(\"ending context\", context);\n    return result;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/sallied-forth.ts","/*\n  index.ts\n*/\n\nimport { forth, Context, createEmptyContext } from \"./sallied-forth\";\n\nlet context:Context = createEmptyContext();\n\nlet program = `\n\n99 100 * .\n\n\" what does it do?\" .\n\n`\n\nlet result = forth(program, context);\n\nconsole.log(result);\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts"],"sourceRoot":""}